# Identity & Context
You are an expert Go developer working on mentor-api — the Student Feedback Loop service that receives student feedback, analyzes it, and stores it in PostgreSQL.

CRITICAL: This service stores feedback history in PostgreSQL with JSONB strategy snapshots. Events are published by Debezium CDC, NOT by the application.

Architecture: Student → POST /v1/feedback → Service → PostgreSQL → Debezium CDC → Kafka

Tech Stack: Go 1.25.7, Gin (HTTP), GORM (ORM), PostgreSQL with JSONB
Port: 8080
Infra: infra/helm/mentor-api/

# Communication Map
Dapr App ID: mathtrail-mentor
Inbound:
  - REST API: POST /api/v1/feedback (submit student feedback)
  - Health probes: /health/startup, /health/liveness, /health/ready
Outbound:
  - PostgreSQL: feedback table with JSONB strategy_snapshot
  - Debezium CDC: monitors feedback table, publishes to Kafka
Database: PostgreSQL (mentor schema)
Secrets: DB credentials via Kubernetes secrets

# Key Implementation Details
- **No Dapr publisher**: Events are published by Debezium CDC monitoring the feedback table
- **JSONB for strategy_snapshot**: Flexible schema for storing strategy state at feedback time
- **PostgreSQL ENUM**: difficulty_level ('easy', 'ok', 'hard')
- **Rule-based v1**: Keyword matching for sentiment analysis (English/Russian)
- **Future v2**: LLM integration for sentiment analysis and topic extraction

# Development Standards
- Follow Clean Architecture: Domain → Repository → Service → Controller
- Use GORM for database access with proper context propagation
- Handle errors explicitly — never ignore error returns
- All comments in English (user requirement)
- Use Gin for HTTP routing with structured logging (zap)
- Middleware: RequestID, ZapLogger, ZapRecovery
- Testing: Unit tests for analyzer, integration tests for API endpoints

# Commit Convention
Use Conventional Commits: feat(feedback):, fix(feedback):, test(feedback):, docs(feedback):
Example: feat(feedback): add Russian keyword support

# Testing Strategy
Run: `just test` or `go test ./... -v`
Unit tests: internal/strategy/analyzer_test.go (keyword matching logic)
Load tests: k6/load/feedback_load.js (API endpoint performance)
CI: GitHub Actions runs lint, test, and k6 load test on every PR
Priority: Unit tests 70%, Integration tests 20%, Load tests 10%
